{% extends "core/base.html" %}

{% block title %}Settings <i class="bi bi-gear"></i>{% endblock %}

{% block content %}
    {% load crispy_forms_tags %}

    <!-- Placeholder for the modal -->
    <div id="modal" class="modal fade">
        <div id="dialog" class="modal-dialog" hx-target="this"></div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3">
                <h5 class="card-header">Organization</h5>
                <div class="card-body" x-data="{ isModified: false }">
                    <form method="POST" x-on:input="isModified = true">
                        {% csrf_token %}
                        {{ organization_form|crispy }}
                        <button
                            type="submit"
                            name="submit_organization"
                            class="btn btn-success"
                            :disabled="!isModified"
                        >
                            Save
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <h5 class="card-header">Club</h5>
                <div class="card-body" x-data="{ isModified: false }">
                    <form method="POST" x-on:input="isModified = true">
                        {% csrf_token %}
                        {{ club_form|crispy }}
                        <button type="submit" name="submit_club" class="btn btn-success" :disabled="!isModified">
                            Save
                        </button>
                    </form>
                </div>
            </div>
            <div class="card mb-3">
                <h5 class="card-header">Agents</h5>
                <div class="card-body">
                    <button
                        class="btn btn-success mb-3"
                        hx-get="{% url 'clubs:add_agent' club_id %}"
                        hx-target="#dialog"
                    >
                        Add Agent <i class="bi bi-person-plus-fill"></i>
                    </button>
                    <div
                        hx-trigger="load, agentListChanged from:body"
                        hx-get="{% url 'clubs:agent_list' club_id %}"
                        hx-target="this"
                    ></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
